(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{gekI:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=function(){},i=t("pMnS"),a=t("Ip0R"),r=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),o=e.La({encapsulation:2,styles:[],data:{}});function s(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,6,"div",[["class","tags has-addons"]],null,null,null,null,null)),(n()(),e.Na(1,0,null,null,1,"span",[["class","tag is-dark"]],null,null,null,null,null)),(n()(),e.db(2,null,["",""])),(n()(),e.Na(3,0,null,null,3,"span",[],null,null,null,null,null)),e.Ma(4,278528,null,0,a.k,[e.q,e.r,e.k,e.B],{ngClass:[0,"ngClass"]},null),e.Ya(5,2),(n()(),e.db(6,null,["",""]))],function(n,l){n(l,4,0,n(l,5,0,"tag",l.component.tagClass))},function(n,l){var t=l.component;n(l,2,0,t.caption),n(l,6,0,t.value)})}var c=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),d=e.La({encapsulation:2,styles:[],data:{}});function p(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,3,"div",[["class","control"]],null,null,null,null,null)),(n()(),e.Na(1,0,null,null,2,"app-data-tag",[],null,null,null,s,o)),e.Ma(2,114688,null,0,r,[],{caption:[0,"caption"],value:[1,"value"],tagClass:[2,"tagClass"]},null),e.ab(3,2)],function(n,l){n(l,2,0,l.context.$implicit.caption,e.eb(l,2,1,n(l,3,0,e.Xa(l.parent,0),l.context.$implicit.value,"1.0-0")),l.context.$implicit.class)},null)}function h(n){return e.fb(0,[e.Za(0,a.f,[e.s]),(n()(),e.Na(1,0,null,null,2,"div",[["class","field is-grouped is-grouped-multiline"]],null,null,null,null,null)),(n()(),e.Ea(16777216,null,null,1,null,p)),e.Ma(3,278528,null,0,a.l,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.Na(4,0,null,null,2,"progress",[],[[8,"value",0],[8,"max",0]],null,null,null,null)),e.Ma(5,278528,null,0,a.k,[e.q,e.r,e.k,e.B],{ngClass:[0,"ngClass"]},null),e.Ya(6,2),(n()(),e.Na(7,0,null,null,0,"br",[],null,null,null,null,null))],function(n,l){var t=l.component;n(l,3,0,t.indicator.tags),n(l,5,0,n(l,6,0,"progress",t.indicator.class))},function(n,l){var t=l.component;n(l,4,0,t.indicator.value,t.indicator.max)})}var f=function(){function n(){this.brakeDisabled=!1,this.throttleDisabled=!1,this.brake=new e.m,this.throttle=new e.m}return n.prototype.ngOnInit=function(){},n}(),g=e.La({encapsulation:2,styles:[],data:{}});function b(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,6,"section",[["class","field is-grouped"]],null,null,null,null,null)),(n()(),e.Na(1,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),e.Na(2,0,null,null,1,"button",[["class","button is-danger is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.brake.next()&&e),e},null,null)),(n()(),e.db(-1,null,["Brake"])),(n()(),e.Na(4,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),e.Na(5,0,null,null,1,"button",[["class","button is-primary is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.throttle.next()&&e),e},null,null)),(n()(),e.db(-1,null,["Throttle"]))],null,function(n,l){var t=l.component;n(l,2,0,t.brakeDisabled),n(l,5,0,t.throttleDisabled)})}var y=t("gIcY"),v=function(){function n(){this.recharge=new e.m,this.rechargedDistance=0}return n.prototype.ngOnInit=function(){},n}(),m=e.La({encapsulation:2,styles:[],data:{}});function I(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,17,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,l,t){var u=!0,i=n.component;return"submit"===l&&(u=!1!==e.Xa(n,2).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Xa(n,2).onReset()&&u),"ngSubmit"===l&&(u=!1!==i.recharge.next(i.rechargedDistance)&&u),u},null,null)),e.Ma(1,16384,null,0,y.m,[],null,null),e.Ma(2,4210688,null,0,y.i,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e.bb(2048,null,y.b,null,[y.i]),e.Ma(4,16384,null,0,y.h,[[4,y.b]],null,null),(n()(),e.Na(5,0,null,null,12,"div",[],null,null,null,null,null)),(n()(),e.Na(6,0,null,null,11,"div",[["class","field has-addons"]],null,null,null,null,null)),(n()(),e.Na(7,0,null,null,7,"div",[["class","control"]],null,null,null,null,null)),(n()(),e.Na(8,0,null,null,6,"input",[["class","input"],["name","rechargedDistance"],["placeholder","Kilometers"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,l,t){var u=!0,i=n.component;return"input"===l&&(u=!1!==e.Xa(n,9)._handleInput(t.target.value)&&u),"blur"===l&&(u=!1!==e.Xa(n,9).onTouched()&&u),"compositionstart"===l&&(u=!1!==e.Xa(n,9)._compositionStart()&&u),"compositionend"===l&&(u=!1!==e.Xa(n,9)._compositionEnd(t.target.value)&&u),"change"===l&&(u=!1!==e.Xa(n,10).onChange(t.target.value)&&u),"input"===l&&(u=!1!==e.Xa(n,10).onChange(t.target.value)&&u),"blur"===l&&(u=!1!==e.Xa(n,10).onTouched()&&u),"ngModelChange"===l&&(u=!1!==(i.rechargedDistance=t)&&u),u},null,null)),e.Ma(9,16384,null,0,y.c,[e.B,e.k,[2,y.a]],null,null),e.Ma(10,16384,null,0,y.l,[e.B,e.k],null,null),e.bb(1024,null,y.e,function(n,l){return[n,l]},[y.c,y.l]),e.Ma(12,671744,null,0,y.j,[[2,y.b],[8,null],[8,null],[6,y.e]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.bb(2048,null,y.f,null,[y.j]),e.Ma(14,16384,null,0,y.g,[[4,y.f]],null,null),(n()(),e.Na(15,0,null,null,2,"div",[["class","control"]],null,null,null,null,null)),(n()(),e.Na(16,0,null,null,1,"button",[["class","button is-primary"],["type","submit"]],null,null,null,null,null)),(n()(),e.db(-1,null,["Recharge"]))],function(n,l){n(l,12,0,"rechargedDistance",l.component.rechargedDistance)},function(n,l){n(l,0,0,e.Xa(l,4).ngClassUntouched,e.Xa(l,4).ngClassTouched,e.Xa(l,4).ngClassPristine,e.Xa(l,4).ngClassDirty,e.Xa(l,4).ngClassValid,e.Xa(l,4).ngClassInvalid,e.Xa(l,4).ngClassPending),n(l,8,0,e.Xa(l,14).ngClassUntouched,e.Xa(l,14).ngClassTouched,e.Xa(l,14).ngClassPristine,e.Xa(l,14).ngClassDirty,e.Xa(l,14).ngClassValid,e.Xa(l,14).ngClassInvalid,e.Xa(l,14).ngClassPending)})}var S=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),k=e.La({encapsulation:2,styles:[],data:{}});function B(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,11,"article",[["class","card"]],null,null,null,null,null)),(n()(),e.Na(1,0,null,null,4,"header",[["class","card-header"]],null,null,null,null,null)),(n()(),e.Na(2,0,null,null,1,"span",[["class","card-header-title"]],null,null,null,null,null)),(n()(),e.db(3,null,[" "," "])),(n()(),e.Na(4,0,null,null,1,"span",[["class","card-header-icon"]],null,null,null,null,null)),(n()(),e.db(5,null,[" "," "])),(n()(),e.Na(6,0,null,null,2,"div",[["class","card-content"]],null,null,null,null,null)),(n()(),e.Na(7,0,null,null,1,"div",[["class","content"]],null,null,null,null,null)),e.Wa(null,0),(n()(),e.Na(9,0,null,null,2,"div",[["class","card-footer"]],null,null,null,null,null)),(n()(),e.Na(10,0,null,null,1,"div",[["class","card-footer-item"]],null,null,null,null,null)),e.Wa(null,1)],null,function(n,l){var t=l.component;n(l,3,0,t.caption),n(l,5,0,t.value)})}var C=t("6blF"),N=t("mrSG"),w=function(n){function l(l,t){var e=n.call(this,l,t)||this;return e.scheduler=l,e.work=t,e.pending=!1,e}return N.b(l,n),l.prototype.schedule=function(n,l){if(void 0===l&&(l=0),this.closed)return this;this.state=n;var t=this.id,e=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(e,t,l)),this.pending=!0,this.delay=l,this.id=this.id||this.requestAsyncId(e,this.id,l),this},l.prototype.requestAsyncId=function(n,l,t){return void 0===t&&(t=0),setInterval(n.flush.bind(n,this),t)},l.prototype.recycleAsyncId=function(n,l,t){if(void 0===t&&(t=0),null!==t&&this.delay===t&&!1===this.pending)return l;clearInterval(l)},l.prototype.execute=function(n,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(n,l);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(n,l){var t=!1,e=void 0;try{this.work(n)}catch(n){t=!0,e=!!n&&n||new Error(n)}if(t)return this.unsubscribe(),e},l.prototype._unsubscribe=function(){var n=this.id,l=this.scheduler,t=l.actions,e=t.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==e&&t.splice(e,1),null!=n&&(this.id=this.recycleAsyncId(l,n,null)),this.delay=null},l}(function(n){function l(l,t){return n.call(this)||this}return N.b(l,n),l.prototype.schedule=function(n,l){return void 0===l&&(l=0),this},l}(t("pugT").a)),M=function(){function n(l,t){void 0===t&&(t=n.now),this.SchedulerAction=l,this.now=t}return n.prototype.schedule=function(n,l,t){return void 0===l&&(l=0),new this.SchedulerAction(this,n).schedule(t,l)},n.now=function(){return Date.now()},n}(),D=new(function(n){function l(t,e){void 0===e&&(e=M.now);var u=n.call(this,t,function(){return l.delegate&&l.delegate!==u?l.delegate.now():e()})||this;return u.actions=[],u.active=!1,u.scheduled=void 0,u}return N.b(l,n),l.prototype.schedule=function(t,e,u){return void 0===e&&(e=0),l.delegate&&l.delegate!==this?l.delegate.schedule(t,e,u):n.prototype.schedule.call(this,t,e,u)},l.prototype.flush=function(n){var l=this.actions;if(this.active)l.push(n);else{var t;this.active=!0;do{if(t=n.execute(n.state,n.delay))break}while(n=l.shift());if(this.active=!1,t){for(;n=l.shift();)n.unsubscribe();throw t}}},l}(M))(w),X=t("isby");function x(n){var l=n.subscriber,t=n.counter,e=n.period;l.next(t),this.schedule({subscriber:l,counter:t+1,period:e},e)}var T=t("67Y/"),O=t("MGBS"),V=t("rPjj"),j=t("zotm"),E=t("0/uQ");function _(n,l){return"function"==typeof l?function(t){return t.pipe(_(function(t,e){return Object(E.a)(n(t,e)).pipe(Object(T.a)(function(n,u){return l(t,n,e,u)}))}))}:function(l){return l.lift(new R(n))}}var R=function(){function n(n){this.project=n}return n.prototype.call=function(n,l){return l.subscribe(new A(n,this.project))},n}(),A=function(n){function l(l,t){var e=n.call(this,l)||this;return e.project=t,e.index=0,e}return N.b(l,n),l.prototype._next=function(n){var l,t=this.index++;try{l=this.project(n,t)}catch(n){return void this.destination.error(n)}this._innerSub(l,n,t)},l.prototype._innerSub=function(n,l,t){var e=this.innerSubscription;e&&e.unsubscribe();var u=new V.a(this,void 0,void 0);this.add(u),this.innerSubscription=Object(j.a)(this,n,l,t,u)},l.prototype._complete=function(){var l=this.innerSubscription;l&&!l.closed||n.prototype._complete.call(this)},l.prototype._unsubscribe=function(){this.innerSubscription=null},l.prototype.notifyComplete=function(l){this.remove(l),this.innerSubscription=null,this.isStopped&&n.prototype._complete.call(this)},l.prototype.notifyNext=function(n,l,t,e,u){this.destination.next(l)},l}(O.a),G=t("xMyE"),J=t("AytR"),L=t("nsGb"),F=[{value:0,max:0,class:"is-info",tags:[{caption:"Speed",value:0,class:"is-info"},{caption:"Top",value:0,class:"is-danger"}]},{value:0,max:0,class:"is-success",tags:[{caption:"Traveled",value:0,class:"is-success"},{caption:"Remaining",value:0,class:"is-danger"}]}],q=function(){function n(){this.indicators=F,this.batteryIndicator=this.indicators[1],this.speedIndicator=this.indicators[0]}return n.prototype.initilizeIndicators=function(n){return this.speedIndicator.max=n.topSpeed,this.speedIndicator.tags[1].value=n.topSpeed,this.batteryIndicator.max=n.totalBattery,this.updateIndicators(n),this.indicators},n.prototype.updateIndicators=function(n){return this.speedIndicator.value=n.currentSpeed,this.speedIndicator.class=this.getSpeedClass(n),this.speedIndicator.tags[0].value=n.currentSpeed,this.batteryIndicator.value=n.remainingBattery,this.batteryIndicator.class=this.getBatteryClass(n),this.batteryIndicator.tags[0].value=n.distanceTraveled,this.batteryIndicator.tags[1].value=n.remainingBattery,this.indicators},n.prototype.getBatteryClass=function(n){return n.remainingBattery<=J.a.dangerKmsBattery?"is-danger":n.remainingBattery<=J.a.warningKmsBattery?"is-warning":"is-success"},n.prototype.getSpeedClass=function(n){var l=n.currentSpeed/n.topSpeed;return l>=J.a.dangerSpeedRate?"is-danger":l>=J.a.warningSpeedRate?"is-warning":"is-info"},n}(),P=function(){function n(){var n=this;this.oneHour=3600,this.hasBattery=function(n){return n.remainingBattery>0},this.isBrakeDisabled=function(n){return n.currentSpeed<=0},this.isThrottleDisabled=function(n){return n.currentSpeed>=n.topSpeed},this.rawDeltaSpeed=function(n){return n.topSpeed-n.currentSpeed+1},this.deltaSpeed=function(l){return n.rawDeltaSpeed(l)/J.a.factorSpeed}}return n.prototype.brake=function(n){n.currentSpeed-=this.deltaSpeed(n)},n.prototype.throttle=function(n){n.currentSpeed+=this.deltaSpeed(n)},n.prototype.recharge=function(n,l){l.remainingBattery=this.getValidatedRecharging(n,l)},n.prototype.checkBattery=function(n){n.remainingBattery<=n.currentSpeed?this.stopCar(n):this.travelDistance(n)},n.prototype.checkSpeed=function(n){n.currentSpeed<=1&&(n.currentSpeed=0)},n.prototype.stopCar=function(n){n.currentSpeed=0,n.distanceTraveled+=n.remainingBattery,n.remainingBattery=0},n.prototype.travelDistance=function(n){n.distanceTraveled+=n.currentSpeed/this.oneHour*J.a.timeTravel,n.remainingBattery-=n.currentSpeed/this.oneHour*J.a.timeTravel},n.prototype.getValidatedRecharging=function(n,l){var t=n;return!n||n<0?t=0:n>l.totalBattery&&(t=l.totalBattery),t},n}(),z=function(){function n(n,l,t,e){var u=this;this.route=n,this.cars=l,this.display=t,this.engine=e,this.onBrake=function(){return u.engine.brake(u.car)},this.onThrottle=function(){return u.engine.throttle(u.car)},this.onRecharge=function(n){return u.engine.recharge(n,u.car)},this.hasBattery=function(){return u.engine.hasBattery(u.car)},this.isBrakeDisabled=function(){return u.engine.isBrakeDisabled(u.car)},this.isThrottleDisabled=function(){return u.engine.isThrottleDisabled(u.car)},this.initilizeIndicators=function(){return u.indicators=u.display.initilizeIndicators(u.car)},this.updateIndicators=function(){return u.indicators=u.display.updateIndicators(u.car)},this.checkSpeed=function(){return u.engine.checkSpeed(u.car)},this.checkBattery=function(){return u.engine.checkBattery(u.car)}}return n.prototype.ngOnInit=function(){var n=this;this.subscription=this.route.params.pipe(Object(T.a)(function(n){return n.carId}),_(function(l){return n.cars.getCarByLinkId$(l)})).pipe(Object(G.a)(function(l){return n.onCarGotted(l)}),_(function(){return void 0===(n=J.a.refreshInterval)&&(n=0),void 0===l&&(l=D),t=n,(Object(X.a)(t)||!(t-parseFloat(t)+1>=0)||n<0)&&(n=0),l&&"function"==typeof l.schedule||(l=D),new C.a(function(t){return t.add(l.schedule(x,n,{subscriber:t,counter:0,period:n})),t});var n,l,t})).subscribe(function(){return n.timeGoesBy()})},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},n.prototype.onCarGotted=function(n){this.car=n,this.initilizeIndicators(),this.timeGoesBy()},n.prototype.timeGoesBy=function(){this.checkSpeed(),this.checkBattery(),this.updateIndicators()},n}(),Y=t("ZYCi"),Z=e.La({encapsulation:2,styles:[],data:{}});function $(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,1,"app-indicator",[],null,null,null,h,d)),e.Ma(1,114688,null,0,c,[],{indicator:[0,"indicator"]},null)],function(n,l){n(l,1,0,l.context.$implicit)},null)}function K(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,1,"app-speed-controls",[],null,[[null,"brake"],[null,"throttle"]],function(n,l,t){var e=!0,u=n.component;return"brake"===l&&(e=!1!==u.onBrake()&&e),"throttle"===l&&(e=!1!==u.onThrottle()&&e),e},b,g)),e.Ma(1,114688,null,0,f,[],{brakeDisabled:[0,"brakeDisabled"],throttleDisabled:[1,"throttleDisabled"]},{brake:"brake",throttle:"throttle"})],function(n,l){var t=l.component;n(l,1,0,t.isBrakeDisabled(),t.isThrottleDisabled())},null)}function U(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,1,"app-battery-recharger",[],null,[[null,"recharge"]],function(n,l,t){var e=!0;return"recharge"===l&&(e=!1!==n.component.onRecharge(t)&&e),e},I,m)),e.Ma(1,114688,null,0,v,[],null,{recharge:"recharge"})],function(n,l){n(l,1,0)},null)}function H(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,11,"app-card",[],null,null,null,B,k)),e.Ma(1,114688,null,0,S,[],{caption:[0,"caption"],value:[1,"value"]},null),e.ab(2,1),e.ab(3,2),(n()(),e.Na(4,0,null,0,2,"main",[],null,null,null,null,null)),(n()(),e.Ea(16777216,null,null,1,null,$)),e.Ma(6,278528,null,0,a.l,[e.M,e.J,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.Na(7,0,null,1,4,"footer",[],null,null,null,null,null)),(n()(),e.Ea(16777216,null,null,1,null,K)),e.Ma(9,16384,null,0,a.m,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(n()(),e.Ea(16777216,null,null,1,null,U)),e.Ma(11,16384,null,0,a.m,[e.M,e.J],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,1,0,e.eb(l,1,0,n(l,2,0,e.Xa(l.parent,0),t.car.name)),e.eb(l,1,1,n(l,3,0,e.Xa(l.parent,1),t.car.cost,"EUR"))),n(l,6,0,t.indicators),n(l,9,0,t.hasBattery()),n(l,11,0,!t.hasBattery())},null)}function W(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),e.db(-1,null,[" Loading car... "]))],null,null)}function Q(n){return e.fb(0,[e.Za(0,a.r,[]),e.Za(0,a.d,[e.s]),(n()(),e.Ea(16777216,null,null,1,null,H)),e.Ma(3,16384,null,0,a.m,[e.M,e.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),e.Ea(0,[["loading",2]],null,0,null,W))],function(n,l){n(l,3,0,l.component.car,e.Xa(l,4))},null)}var nn=e.Ja("app-car",z,function(n){return e.fb(0,[(n()(),e.Na(0,0,null,null,1,"app-car",[],null,null,null,Q,Z)),e.Ma(1,245760,null,0,z,[Y.a,L.a,q,P],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),ln=function(){},tn=t("PCNd");t.d(l,"CarModuleNgFactory",function(){return en});var en=e.Ka(u,[],function(n){return e.Ua([e.Va(512,e.j,e.Z,[[8,[i.a,nn]],[3,e.j],e.v]),e.Va(4608,a.o,a.n,[e.s,[2,a.w]]),e.Va(4608,y.n,y.n,[]),e.Va(4608,q,q,[]),e.Va(4608,P,P,[]),e.Va(1073742336,a.c,a.c,[]),e.Va(1073742336,Y.m,Y.m,[[2,Y.s],[2,Y.k]]),e.Va(1073742336,ln,ln,[]),e.Va(1073742336,y.k,y.k,[]),e.Va(1073742336,y.d,y.d,[]),e.Va(1073742336,tn.a,tn.a,[]),e.Va(1073742336,u,u,[]),e.Va(1024,Y.i,function(){return[[{path:":carId",component:z}]]},[])])})}}]);