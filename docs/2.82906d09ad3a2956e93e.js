(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{gekI:function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),a=function(){},r=e("pMnS"),u=e("Ip0R"),i=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),o=l.Qa({encapsulation:2,styles:[],data:{}});function c(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,6,"div",[["class","tags has-addons"]],null,null,null,null,null)),(n()(),l.Sa(1,0,null,null,1,"span",[["class","tag is-dark"]],null,null,null,null,null)),(n()(),l.ib(2,null,["",""])),(n()(),l.Sa(3,0,null,null,3,"span",[],null,null,null,null,null)),l.Ra(4,278528,null,0,u.k,[l.u,l.v,l.l,l.F],{ngClass:[0,"ngClass"]},null),l.db(5,2),(n()(),l.ib(6,null,["",""]))],function(n,t){n(t,4,0,n(t,5,0,"tag",t.component.tagClass))},function(n,t){var e=t.component;n(t,2,0,e.caption),n(t,6,0,e.value)})}var s=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),d=l.Qa({encapsulation:2,styles:[],data:{}});function p(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,3,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(1,0,null,null,2,"app-data-tag",[],null,null,null,c,o)),l.Ra(2,114688,null,0,i,[],{caption:[0,"caption"],value:[1,"value"],tagClass:[2,"tagClass"]},null),l.fb(3,2)],function(n,t){n(t,2,0,t.context.$implicit.caption,l.jb(t,2,1,n(t,3,0,l.cb(t.parent,0),t.context.$implicit.value,"1.0-0")),t.context.$implicit.class)},null)}function h(n){return l.kb(0,[l.eb(0,u.f,[l.w]),(n()(),l.Sa(1,0,null,null,2,"div",[["class","field is-grouped is-grouped-multiline"]],null,null,null,null,null)),(n()(),l.Ja(16777216,null,null,1,null,p)),l.Ra(3,278528,null,0,u.l,[l.R,l.O,l.u],{ngForOf:[0,"ngForOf"]},null),(n()(),l.Sa(4,0,null,null,2,"progress",[],[[8,"value",0],[8,"max",0]],null,null,null,null)),l.Ra(5,278528,null,0,u.k,[l.u,l.v,l.l,l.F],{ngClass:[0,"ngClass"]},null),l.db(6,2),(n()(),l.Sa(7,0,null,null,0,"br",[],null,null,null,null,null))],function(n,t){var e=t.component;n(t,3,0,e.indicator.tags),n(t,5,0,n(t,6,0,"progress",e.indicator.class))},function(n,t){var e=t.component;n(t,4,0,e.indicator.value,e.indicator.max)})}var f=function(){function n(){this.brakeDisabled=!1,this.throttleDisabled=!1,this.brake=new l.n,this.throttle=new l.n}return n.prototype.ngOnInit=function(){},n}(),v=l.Qa({encapsulation:2,styles:[],data:{}});function b(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,6,"section",[["class","field is-grouped"]],null,null,null,null,null)),(n()(),l.Sa(1,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(2,0,null,null,1,"button",[["class","button is-danger is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.brake.next()&&l),l},null,null)),(n()(),l.ib(-1,null,["Brake"])),(n()(),l.Sa(4,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(5,0,null,null,1,"button",[["class","button is-primary is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.throttle.next()&&l),l},null,null)),(n()(),l.ib(-1,null,["Throttle"]))],null,function(n,t){var e=t.component;n(t,2,0,e.brakeDisabled),n(t,5,0,e.throttleDisabled)})}var g=e("gIcY"),y=e("Y9ZX"),m=function(){function n(n,t){this.fb=n,this.formTools=t,this.recharge=new l.n,this.totalBattery=100,this.minimumBattery=10}return n.prototype.ngOnInit=function(){this.form=this.fb.group({rechargedDistance:[0,[g.l.required,g.l.min(this.minimumBattery),g.l.max(this.totalBattery)]]})},n.prototype.getErrors=function(n){return this.formTools.getErrors(this.form,n)},n.prototype.mustShowError=function(n){return this.formTools.mustShowError(this.form,n)},n.prototype.hasError=function(n,t){return this.formTools.hasError(this.form,n,t)},n}(),T=l.Qa({encapsulation:2,styles:[],data:{}});function S(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"p",[["class","help is-danger"]],null,null,null,null,null)),(n()(),l.ib(1,null,["Fill more than ",""]))],null,function(n,t){n(t,1,0,t.component.getErrors("rechargedDistance").min.min)})}function D(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"p",[["class","help is-danger"]],null,null,null,null,null)),(n()(),l.ib(1,null,["Fill less than ",""]))],null,function(n,t){n(t,1,0,t.component.getErrors("rechargedDistance").max.max)})}function O(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,21,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"submit"],[null,"reset"]],function(n,t,e){var a=!0,r=n.component;return"submit"===t&&(a=!1!==l.cb(n,2).onSubmit(e)&&a),"reset"===t&&(a=!1!==l.cb(n,2).onReset()&&a),"keyup.enter"===t&&(a=!1!==r.recharge.next(r.form.value.rechargedDistance)&&a),a},null,null)),l.Ra(1,16384,null,0,g.o,[],null,null),l.Ra(2,540672,null,0,g.f,[[8,null],[8,null]],{form:[0,"form"]},null),l.gb(2048,null,g.b,null,[g.f]),l.Ra(4,16384,null,0,g.j,[[4,g.b]],null,null),(n()(),l.Sa(5,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),l.Sa(6,0,null,null,15,"div",[["class","field has-addons"]],null,null,null,null,null)),(n()(),l.Sa(7,0,null,null,11,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(8,0,null,null,6,"input",[["class","input"],["formControlName","rechargedDistance"],["name","rechargedDistance"],["placeholder","Kilometers"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,t,e){var a=!0;return"input"===t&&(a=!1!==l.cb(n,9)._handleInput(e.target.value)&&a),"blur"===t&&(a=!1!==l.cb(n,9).onTouched()&&a),"compositionstart"===t&&(a=!1!==l.cb(n,9)._compositionStart()&&a),"compositionend"===t&&(a=!1!==l.cb(n,9)._compositionEnd(e.target.value)&&a),"change"===t&&(a=!1!==l.cb(n,10).onChange(e.target.value)&&a),"input"===t&&(a=!1!==l.cb(n,10).onChange(e.target.value)&&a),"blur"===t&&(a=!1!==l.cb(n,10).onTouched()&&a),a},null,null)),l.Ra(9,16384,null,0,g.c,[l.F,l.l,[2,g.a]],null,null),l.Ra(10,16384,null,0,g.n,[l.F,l.l],null,null),l.gb(1024,null,g.g,function(n,t){return[n,t]},[g.c,g.n]),l.Ra(12,671744,null,0,g.e,[[3,g.b],[8,null],[8,null],[6,g.g],[2,g.q]],{name:[0,"name"]},null),l.gb(2048,null,g.h,null,[g.e]),l.Ra(14,16384,null,0,g.i,[[4,g.h]],null,null),(n()(),l.Ja(16777216,null,null,1,null,S)),l.Ra(16,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.Ja(16777216,null,null,1,null,D)),l.Ra(18,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.Sa(19,0,null,null,2,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(20,0,null,null,1,"button",[["class","button is-primary"]],[[8,"disabled",0]],[[null,"click"]],function(n,t,e){var l=!0,a=n.component;return"click"===t&&(l=!1!==a.recharge.next(a.form.value.rechargedDistance)&&l),l},null,null)),(n()(),l.ib(-1,null,["Recharge"]))],function(n,t){var e=t.component;n(t,2,0,e.form),n(t,12,0,"rechargedDistance"),n(t,16,0,e.hasError("rechargedDistance","min")),n(t,18,0,e.hasError("rechargedDistance","max"))},function(n,t){var e=t.component;n(t,0,0,l.cb(t,4).ngClassUntouched,l.cb(t,4).ngClassTouched,l.cb(t,4).ngClassPristine,l.cb(t,4).ngClassDirty,l.cb(t,4).ngClassValid,l.cb(t,4).ngClassInvalid,l.cb(t,4).ngClassPending),n(t,8,0,l.cb(t,14).ngClassUntouched,l.cb(t,14).ngClassTouched,l.cb(t,14).ngClassPristine,l.cb(t,14).ngClassDirty,l.cb(t,14).ngClassValid,l.cb(t,14).ngClassInvalid,l.cb(t,14).ngClassPending),n(t,20,0,e.form.invalid)})}var k=e("9W44"),C=e("SHZb"),B=function(){function n(){this.brake=new l.n,this.throttle=new l.n,this.recharge=new l.n}return n.prototype.ngOnInit=function(){},n}(),I=l.Qa({encapsulation:2,styles:[],data:{}});function w(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"app-indicator",[],null,null,null,h,d)),l.Ra(1,114688,null,0,s,[],{indicator:[0,"indicator"]},null)],function(n,t){n(t,1,0,t.context.$implicit)},null)}function j(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"app-speed-controls",[],null,[[null,"brake"],[null,"throttle"]],function(n,t,e){var l=!0,a=n.component;return"brake"===t&&(l=!1!==a.brake.next()&&l),"throttle"===t&&(l=!1!==a.throttle.next()&&l),l},b,v)),l.Ra(1,114688,null,0,f,[],{brakeDisabled:[0,"brakeDisabled"],throttleDisabled:[1,"throttleDisabled"]},{brake:"brake",throttle:"throttle"})],function(n,t){var e=t.component;n(t,1,0,e.isBrakeDisabled,e.isThrottleDisabled)},null)}function E(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"app-battery-recharger",[],null,[[null,"recharge"]],function(n,t,e){var l=!0;return"recharge"===t&&(l=!1!==n.component.recharge.next(e)&&l),l},O,T)),l.Ra(1,114688,null,0,m,[g.d,y.a],{totalBattery:[0,"totalBattery"]},{recharge:"recharge"})],function(n,t){n(t,1,0,t.component.car.totalBattery)},null)}function R(n){return l.kb(0,[l.eb(0,u.r,[]),l.eb(0,u.d,[l.w]),(n()(),l.Sa(2,0,null,null,11,"app-card",[],null,null,null,k.b,k.a)),l.Ra(3,114688,null,0,C.a,[],{caption:[0,"caption"],value:[1,"value"]},null),l.fb(4,1),l.fb(5,2),(n()(),l.Sa(6,0,null,0,2,"main",[],null,null,null,null,null)),(n()(),l.Ja(16777216,null,null,1,null,w)),l.Ra(8,278528,null,0,u.l,[l.R,l.O,l.u],{ngForOf:[0,"ngForOf"]},null),(n()(),l.Sa(9,0,null,1,4,"footer",[],null,null,null,null,null)),(n()(),l.Ja(16777216,null,null,1,null,j)),l.Ra(11,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.Ja(16777216,null,null,1,null,E)),l.Ra(13,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,3,0,l.jb(t,3,0,n(t,4,0,l.cb(t,0),e.car.name)),l.jb(t,3,1,n(t,5,0,l.cb(t,1),e.car.cost,"EUR"))),n(t,8,0,e.indicators),n(t,11,0,e.hasBattery),n(t,13,0,!e.hasBattery)},null)}var L=function(){function n(){this.save=new l.n,this.delete=new l.n}return n.prototype.ngOnInit=function(){},n}(),U=l.Qa({encapsulation:2,styles:[],data:{}});function $(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,7,"section",[],null,null,null,null,null)),(n()(),l.Sa(1,0,null,null,6,"div",[["class","field is-grouped"]],null,null,null,null,null)),(n()(),l.Sa(2,0,null,null,2,"p",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(3,0,null,null,1,"a",[["class","button is-success"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.save.next()&&l),l},null,null)),(n()(),l.ib(-1,null,[" Save travel "])),(n()(),l.Sa(5,0,null,null,2,"p",[["class","control"]],null,null,null,null,null)),(n()(),l.Sa(6,0,null,null,1,"a",[["class","button is-danger"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.delete.next()&&l),l},null,null)),(n()(),l.ib(-1,null,[" Delete travel "]))],null,null)}var x=e("6blF"),K=e("T1DM"),F=e("/21U");function G(n){var t=n.subscriber,e=n.counter,l=n.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:l},l)}var J,Q=e("67Y/"),_=e("xMyE"),M=e("t9fZ"),P=e("VnD/"),Z=e("AytR"),V=e("Ocbj"),Y=[{value:0,max:0,class:"is-info",tags:[{caption:"Speed",value:0,class:"is-info"},{caption:"Top",value:0,class:"is-danger"}]},{value:0,max:0,class:"is-success",tags:[{caption:"Traveled",value:0,class:"is-success"},{caption:"Remaining",value:0,class:"is-danger"}]}],q=function(){function n(){this.indicators=Y,this.speedIndicator=this.indicators[0],this.batteryIndicator=this.indicators[1]}return n.prototype.initilizeIndicators=function(n){return this.speedIndicator.max=n.topSpeed,this.speedIndicator.tags[1].value=n.topSpeed,this.batteryIndicator.max=n.totalBattery,this.updateIndicators(n),this.indicators},n.prototype.updateIndicators=function(n){return this.speedIndicator.value=n.currentSpeed,this.speedIndicator.class=this.getSpeedClass(n),this.speedIndicator.tags[0].value=n.currentSpeed,this.batteryIndicator.value=n.remainingBattery,this.batteryIndicator.class=this.getBatteryClass(n),this.batteryIndicator.tags[0].value=n.distanceTraveled,this.batteryIndicator.tags[1].value=n.remainingBattery,this.indicators},n.prototype.getBatteryClass=function(n){return n.remainingBattery<=Z.a.dangerKmsBattery?"is-danger":n.remainingBattery<=Z.a.warningKmsBattery?"is-warning":"is-success"},n.prototype.getSpeedClass=function(n){var t=n.currentSpeed/n.topSpeed;return t>=Z.a.dangerSpeedRate?"is-danger":t>=Z.a.warningSpeedRate?"is-warning":"is-info"},n}(),z=function(){function n(){var n=this;this.oneHourSecs=3600,this.hasBattery=function(n){return n.remainingBattery>0},this.isBrakeDisabled=function(n){return n.currentSpeed<=0},this.isThrottleDisabled=function(n){return n.currentSpeed>=n.topSpeed},this.deltaSpeed=function(t){return n.rawDeltaSpeed(t)/Z.a.factorSpeed},this.rawDeltaSpeed=function(n){return n.topSpeed-n.currentSpeed+1},this.travelDistance=function(t){var e=t.currentSpeed*Z.a.timeTravel/n.oneHourSecs;t.distanceTraveled+=e,t.remainingBattery-=e},this.getValidatedRecharging=function(n,t){var e=n;return!n||n<0?e=0:n>t.totalBattery&&(e=t.totalBattery),e}}return n.prototype.brake=function(n){n.currentSpeed-=this.deltaSpeed(n),n.currentSpeed<=1&&(n.currentSpeed=0)},n.prototype.throttle=function(n){n.currentSpeed+=this.deltaSpeed(n),n.currentSpeed>n.topSpeed&&(n.currentSpeed=n.topSpeed)},n.prototype.recharge=function(n,t){t.remainingBattery=this.getValidatedRecharging(n,t)},n.prototype.checkBattery=function(n){n.remainingBattery<=n.currentSpeed?this.stopCar(n):this.travelDistance(n)},n.prototype.stopCar=function(n){n.currentSpeed=0,n.distanceTraveled+=n.remainingBattery,n.remainingBattery=0},n}();!function(n){n.LoadCar="[Car] Load Car",n.LoadCarOK="[Car] Load Car OK",n.LoadCarError="[Car] Load Car Error",n.LoadTravel="[Car] Load Travel",n.LoadTravelOK="[Car] Load Travel OK",n.LoadTravelError="[Car] Load Travel Error",n.InsertTravel="[Car] Insert Travel",n.InsertTravelOK="[Car] Insert Travel OK",n.InsertTravelError="[Car] Insert Travel Error",n.UpdateTravel="[Car] Update Travel",n.UpdateTravelOK="[Car] Update Travel OK",n.UpdateTravelError="[Car] Update Travel Error",n.DeleteTravel="[Car] Delete Travel",n.DeleteTravelOK="[Car] Delete Travel OK",n.DeleteTravelError="[Car] Delete Travel Error",n.Brake="[Car] Brake",n.Throttle="[Car] Throttle",n.Recharge="[Car] Recharge",n.UpdateIndicators="[Car] Update Indicators"}(J||(J={}));var N=function(){return function(n){this.payload=n,this.type=J.LoadCar}}(),H=function(){return function(n){this.payload=n,this.type=J.LoadCarOK}}(),W=function(){return function(n){this.payload=n,this.type=J.LoadCarError}}(),X=function(){return function(n){this.payload=n,this.type=J.LoadTravel}}(),A=function(){return function(n){this.payload=n,this.type=J.LoadTravelOK}}(),nn=function(){return function(n){this.payload=n,this.type=J.LoadTravelError}}(),tn=function(){return function(n){this.payload=n,this.type=J.InsertTravel}}(),en=function(){return function(n){this.payload=n,this.type=J.InsertTravelOK}}(),ln=function(){return function(n){this.payload=n,this.type=J.InsertTravelError}}(),an=function(){return function(n){this.payload=n,this.type=J.UpdateTravel}}(),rn=function(){return function(n){this.payload=n,this.type=J.UpdateTravelOK}}(),un=function(){return function(n){this.payload=n,this.type=J.UpdateTravelError}}(),on=function(){return function(n){this.payload=n,this.type=J.DeleteTravel}}(),cn=function(){return function(){this.type=J.DeleteTravelOK}}(),sn=function(){return function(n){this.payload=n,this.type=J.DeleteTravelError}}(),dn=function(){return function(n){this.payload=n,this.type=J.Brake}}(),pn=function(){return function(n){this.payload=n,this.type=J.Throttle}}(),hn=function(){return function(n){this.payload=n,this.type=J.Recharge}}(),fn=function(){return function(n){this.payload=n,this.type=J.UpdateIndicators}}(),vn=e("yGQT"),bn={car:null,travel:null,indicators:[],working:!1,completed:!1,message:"",canBeDeactivated:!0},gn=Object(vn.B)("car"),yn=(Object(vn.D)(gn,function(n){return n}),Object(vn.D)(gn,function(n){return n.car})),mn=Object(vn.D)(gn,function(n){return n.travel}),Tn=Object(vn.D)(gn,function(n){return n.canBeDeactivated}),Sn=Object(vn.D)(gn,function(n){return n.indicators}),Dn=function(){function n(n,t,e,l,a){var r=this;this.route=n,this.display=t,this.engine=e,this.globalStore=l,this.store=a,this._canBeDeactivated=!0,this.onBrake=function(){r.engine.brake(r.car),r.store.dispatch(new dn(r.car))},this.onThrottle=function(){r.engine.throttle(r.car),r.store.dispatch(new pn(r.car))},this.onRecharge=function(n){r.engine.recharge(n,r.car),r.store.dispatch(new hn(r.car))},this.onSaveTravel=function(){return r.store.dispatch(new an(r.car))},this.onDeleteTravel=function(){return r.store.dispatch(new on(r.car))},this.hasBattery=function(){return r.engine.hasBattery(r.car)},this.isBrakeDisabled=function(){return r.engine.isBrakeDisabled(r.car)},this.isThrottleDisabled=function(){return r.engine.isThrottleDisabled(r.car)},this.onCarGotten=function(n){if(null!=n){if(null==r.car){var t=r.display.initilizeIndicators(n);r.store.dispatch(new fn(t)),r.store.dispatch(new X(n))}r.car=n,r.updateIndicators()}},this.onCarTravelGotten=function(n){r.car.currentSpeed=n.currentSpeed,r.car.remainingBattery=n.remainingBattery,r.car.distanceTraveled=n.distanceTraveled,r.car.owner=n.owner,r.globalStore.dispatchUserMessage("Ride like the wind!!"),r.updateIndicators()},this.timeGoesBy=function(n){null!=r.car&&r.updateIndicators()}}return n.prototype.ngOnInit=function(){this.loadCar(),this.selectData()},n.prototype.canBeDeactivated=function(){return this.globalStore.dispatchUserMessage(this._canBeDeactivated?"You can go your own away ;-)":"Save or delete before exit !!"),this._canBeDeactivated},n.prototype.ngOnDestroy=function(){null!=this.intervalSubscription&&this.intervalSubscription.unsubscribe()},n.prototype.loadCar=function(){var n=this;this.globalStore.dispatchUserMessage("Loading data !!"),this.route.params.pipe(Object(Q.a)(function(n){return n.carId})).subscribe(function(t){return n.store.dispatch(new N(t))})},n.prototype.selectData=function(){var n,t,e=this;this.car$=this.store.select(yn).pipe(Object(_.a)(this.onCarGotten)),this.indicators$=this.store.select(Sn),this.travel$=this.store.select(mn).pipe(Object(P.a)(function(n){return null!=n}),Object(M.a)(1),Object(_.a)(this.onCarTravelGotten)),this.store.select(Tn).subscribe(function(n){return e._canBeDeactivated=n}),this.intervalSubscription=(n=Z.a.refreshInterval,void 0===n&&(n=0),void 0===t&&(t=K.a),(!Object(F.a)(n)||n<0)&&(n=0),t&&"function"==typeof t.schedule||(t=K.a),new x.a(function(e){return e.add(t.schedule(G,n,{subscriber:e,counter:0,period:n})),e})).subscribe(this.timeGoesBy)},n.prototype.updateIndicators=function(){this.engine.checkBattery(this.car);var n=this.display.updateIndicators(this.car);this.store.dispatch(new fn(n))},n}(),On=e("ZYCi"),kn=l.Qa({encapsulation:2,styles:[],data:{}});function Cn(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,6,"article",[],null,null,null,null,null)),(n()(),l.Sa(1,0,null,null,2,"app-driver-cockpit",[],null,[[null,"brake"],[null,"throttle"],[null,"recharge"]],function(n,t,e){var l=!0,a=n.component;return"brake"===t&&(l=!1!==a.onBrake()&&l),"throttle"===t&&(l=!1!==a.onThrottle()&&l),"recharge"===t&&(l=!1!==a.onRecharge(e)&&l),l},R,I)),l.Ra(2,114688,null,0,B,[],{car:[0,"car"],indicators:[1,"indicators"],hasBattery:[2,"hasBattery"],isBrakeDisabled:[3,"isBrakeDisabled"],isThrottleDisabled:[4,"isThrottleDisabled"]},{brake:"brake",throttle:"throttle",recharge:"recharge"}),l.eb(131072,u.b,[l.i]),(n()(),l.Sa(4,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),l.Sa(5,0,null,null,1,"app-travel-manager",[],null,[[null,"save"],[null,"delete"]],function(n,t,e){var l=!0,a=n.component;return"save"===t&&(l=!1!==a.onSaveTravel()&&l),"delete"===t&&(l=!1!==a.onDeleteTravel()&&l),l},$,U)),l.Ra(6,114688,null,0,L,[],null,{save:"save",delete:"delete"})],function(n,t){var e=t.component;n(t,2,0,e.car,l.jb(t,2,1,l.cb(t,3).transform(e.indicators$)),e.hasBattery(),e.isBrakeDisabled(),e.isThrottleDisabled()),n(t,6,0)},null)}function Bn(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),l.ib(-1,null,[" Loading car and travel data... "]))],null,null)}function In(n){return l.kb(2,[(n()(),l.Ja(16777216,null,null,3,null,Cn)),l.Ra(1,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),l.eb(131072,u.b,[l.i]),l.eb(131072,u.b,[l.i]),(n()(),l.Ja(0,[["loading",2]],null,0,null,Bn))],function(n,t){var e=t.component;n(t,1,0,null!=l.jb(t,1,0,l.cb(t,2).transform(e.car$))&&null!=l.jb(t,1,0,l.cb(t,3).transform(e.travel$)),l.cb(t,4))},null)}var wn=l.Oa("app-car",Dn,function(n){return l.kb(0,[(n()(),l.Sa(0,0,null,null,1,"app-car",[],null,null,null,In,kn)),l.Ra(1,245760,null,0,Dn,[On.a,q,z,V.a,vn.n],null,null)],function(n,t){n(t,1,0)},null)},{},{},[]),jn=function(){function n(){}return n.prototype.canDeactivate=function(n,t,e,l){return!!l.url.includes("auth")||n.canBeDeactivated()},n}(),En=function(){},Rn=e("PCNd"),Ln=function(){return(Ln=Object.assign||function(n){for(var t,e=1,l=arguments.length;e<l;e++)for(var a in t=arguments[e])Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a]);return n}).apply(this,arguments)};function Un(n,t){switch(void 0===n&&(n=bn),t.type){case J.LoadCar:return{car:null,travel:null,indicators:[],working:!0,completed:!1,message:"Loading car...",canBeDeactivated:!0};case J.LoadCarOK:return{car:t.payload,travel:null,indicators:[],working:!1,completed:!0,message:"Car Loaded",canBeDeactivated:!0};case J.LoadCarError:return{car:null,travel:null,indicators:[],working:!1,completed:!1,message:t.payload,canBeDeactivated:!0};case J.LoadTravel:return Ln({},n,{travel:null,working:!0,completed:!1,message:"Loading Travel...",canBeDeactivated:!0});case J.LoadTravelOK:return Ln({},n,{travel:t.payload,working:!1,completed:!0,message:"Travel Loaded",canBeDeactivated:!0});case J.LoadTravelError:return Ln({},n,{travel:null,working:!1,completed:!1,message:t.payload,canBeDeactivated:!0});case J.InsertTravel:return Ln({},n,{travel:null,working:!0,completed:!1,message:"Inserting Travel...",canBeDeactivated:!0});case J.InsertTravelOK:return Ln({},n,{travel:t.payload,working:!1,completed:!0,message:"Travel Inserted",canBeDeactivated:!0});case J.InsertTravelError:return Ln({},n,{travel:null,working:!1,completed:!1,message:t.payload,canBeDeactivated:!0});case J.UpdateTravel:return Ln({},n,{travel:null,working:!0,completed:!1,message:"Updating Travel...",canBeDeactivated:!1});case J.UpdateTravelOK:return Ln({},n,{travel:t.payload,working:!1,completed:!0,message:"Travel Updated",canBeDeactivated:!0});case J.UpdateTravelError:return Ln({},n,{travel:null,working:!1,completed:!1,message:t.payload,canBeDeactivated:!0});case J.DeleteTravel:return Ln({},n,{travel:null,working:!0,completed:!1,message:"Deleting Travel...",canBeDeactivated:!1});case J.DeleteTravelOK:return Ln({},n,{travel:null,working:!1,completed:!0,message:"Travel Deleted",canBeDeactivated:!0});case J.DeleteTravelError:return Ln({},n,{working:!1,completed:!1,message:t.payload,canBeDeactivated:!0});case J.Brake:return Ln({},n,{car:Ln({},t.payload),message:"Brake",canBeDeactivated:!1});case J.Throttle:return Ln({},n,{car:Ln({},t.payload),message:"Throttle",canBeDeactivated:!1});case J.Throttle:return Ln({},n,{car:Ln({},t.payload),message:"Recharge",canBeDeactivated:!1});case J.UpdateIndicators:return Ln({},n,{indicators:t.payload.slice(),message:"Updating Indicators"});default:return n}}var $n=e("mrSG"),xn=e("jYNz"),Kn=e("F/XL"),Fn=e("9Z1F"),Gn=e("psW0"),Jn=function(){function n(n,t,e){var l=this;this.actions$=n,this.cars=t,this.travels=e,this.loadCarEffect$=this.actions$.pipe(Object(xn.d)(J.LoadCar),Object(Gn.a)(function(n){return l.cars.getCarByLinkId$(n.payload).pipe(Object(Q.a)(function(n){return new H(n)}),Object(Fn.a)(function(n){return Object(Kn.a)(new W("Error loading car"))}))})),this.loadTravelEffect$=this.actions$.pipe(Object(xn.d)(J.LoadTravel),Object(Gn.a)(function(n){return l.travels.getCarTravelByCar$(n.payload).pipe(Object(Q.a)(function(n){return new A(n)}),Object(Fn.a)(function(t){return l.onLoadCarError$(t,n)}))})),this.InsertTravelEffect$=this.actions$.pipe(Object(xn.d)(J.InsertTravel),Object(Gn.a)(function(n){return l.travels.postCarTravel$(n.payload).pipe(Object(Q.a)(function(n){return new en(n)}),Object(Fn.a)(function(n){return Object(Kn.a)(new ln("Error inserting travel"))}))})),this.UpdateTravelEffect$=this.actions$.pipe(Object(xn.d)(J.UpdateTravel),Object(Gn.a)(function(n){return l.travels.putCarTravel$(n.payload).pipe(Object(Q.a)(function(n){return new rn(n)}),Object(Fn.a)(function(n){return Object(Kn.a)(new un("Error updating travel"))}))})),this.DeleteTravelEffect$=this.actions$.pipe(Object(xn.d)(J.DeleteTravel),Object(Gn.a)(function(n){return l.travels.deleteCarTravel$(n.payload).pipe(Object(Q.a)(function(){return new cn}),Object(Fn.a)(function(n){return Object(Kn.a)(new sn("Error deleting travel"))}))}))}return n.prototype.onLoadCarError$=function(n,t){return 404===n.status?Object(Kn.a)(new tn(t.payload)):Object(Kn.a)(new nn("Error loading travel. Try Insert"))},Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"loadCarEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"loadTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"InsertTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"UpdateTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"DeleteTravelEffect$",void 0),n}(),Qn=e("nsGb"),_n=e("t/Na"),Mn=function(){function n(n){var t=this;this.http=n,this.travelsUrl=Z.a.apiUrl+"priv/travels",this.getCarTravelByCar$=function(n){return t.http.get(t.getUrlTravel(n))},this.postCarTravel$=function(n){return t.http.post(t.travelsUrl,t.getTravel(n))},this.putCarTravel$=function(n){return t.http.put(t.getUrlTravel(n),t.getTravel(n))},this.deleteCarTravel$=function(n){return t.http.delete(t.getUrlTravel(n))},this.getUrlTravel=function(n){return t.travelsUrl+"/"+t.getTravelId(n)},this.getTravel=function(n){return{_id:t.getTravelId(n),currentSpeed:n.currentSpeed,remainingBattery:n.remainingBattery,distanceTraveled:n.distanceTraveled,owner:n.owner}},this.getTravelId=function(n){return""+n.link.routerLink}}return n.ngInjectableDef=l.V({factory:function(){return new n(l.Z(_n.c))},token:n,providedIn:"root"}),n}();e.d(t,"CarModuleNgFactory",function(){return Pn});var Pn=l.Pa(a,[],function(n){return l.Za([l.ab(512,l.k,l.Ea,[[8,[r.a,wn]],[3,l.k],l.z]),l.ab(4608,u.o,u.n,[l.w,[2,u.w]]),l.ab(4608,g.d,g.d,[]),l.ab(4608,g.p,g.p,[]),l.ab(4608,y.a,y.a,[]),l.ab(4608,q,q,[]),l.ab(4608,z,z,[]),l.ab(4608,jn,jn,[]),l.ab(1073742336,u.c,u.c,[]),l.ab(1073742336,On.p,On.p,[[2,On.w],[2,On.n]]),l.ab(1073742336,En,En,[]),l.ab(1073742336,g.m,g.m,[]),l.ab(1073742336,g.k,g.k,[]),l.ab(1073742336,Rn.a,Rn.a,[]),l.ab(1024,vn.j,function(){return[{key:"car",reducerFactory:vn.z,metaReducers:[],initialState:void 0}]},[]),l.ab(1024,vn.q,function(){return[Un]},[]),l.ab(1024,vn.r,function(n){return[n]},[vn.q]),l.ab(1024,vn.b,function(n,t,e){return[vn.w(n,t,e)]},[l.s,vn.q,vn.r]),l.ab(1073873408,vn.o,vn.o,[vn.j,vn.b,vn.g,vn.p]),l.ab(512,Jn,Jn,[xn.a,Qn.a,Mn]),l.ab(1024,xn.i,function(n){return[xn.e(n)]},[Jn]),l.ab(1073742336,xn.g,xn.g,[xn.f,xn.i,[2,vn.p],[2,vn.o]]),l.ab(1073742336,a,a,[]),l.ab(1024,On.l,function(){return[[{path:":carId",component:Dn,canDeactivate:[jn]}]]},[])])})}}]);