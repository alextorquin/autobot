(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{gekI:function(n,e,t){"use strict";t.r(e);var l=t("CcnG"),r=function(){},a=t("pMnS"),u=t("Ip0R"),i=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),o=l.qb({encapsulation:2,styles:[],data:{}});function s(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,6,"div",[["class","tags has-addons"]],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,1,"span",[["class","tag is-dark"]],null,null,null,null,null)),(n()(),l.Ib(2,null,["",""])),(n()(),l.sb(3,0,null,null,3,"span",[],null,null,null,null,null)),l.rb(4,278528,null,0,u.k,[l.u,l.v,l.l,l.F],{ngClass:[0,"ngClass"]},null),l.Db(5,2),(n()(),l.Ib(6,null,["",""]))],function(n,e){n(e,4,0,n(e,5,0,"tag",e.component.tagClass))},function(n,e){var t=e.component;n(e,2,0,t.caption),n(e,6,0,t.value)})}var c=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),d=l.qb({encapsulation:2,styles:[],data:{}});function p(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,3,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,2,"app-data-tag",[],null,null,null,s,o)),l.rb(2,114688,null,0,i,[],{caption:[0,"caption"],value:[1,"value"],tagClass:[2,"tagClass"]},null),l.Fb(3,2)],function(n,e){n(e,2,0,e.context.$implicit.caption,l.Jb(e,2,1,n(e,3,0,l.Cb(e.parent,0),e.context.$implicit.value,"1.0-0")),e.context.$implicit.class)},null)}function b(n){return l.Kb(0,[l.Eb(0,u.f,[l.w]),(n()(),l.sb(1,0,null,null,2,"div",[["class","field is-grouped is-grouped-multiline"]],null,null,null,null,null)),(n()(),l.jb(16777216,null,null,1,null,p)),l.rb(3,278528,null,0,u.l,[l.R,l.O,l.u],{ngForOf:[0,"ngForOf"]},null),(n()(),l.sb(4,0,null,null,2,"progress",[],[[8,"value",0],[8,"max",0]],null,null,null,null)),l.rb(5,278528,null,0,u.k,[l.u,l.v,l.l,l.F],{ngClass:[0,"ngClass"]},null),l.Db(6,2),(n()(),l.sb(7,0,null,null,0,"br",[],null,null,null,null,null))],function(n,e){var t=e.component;n(e,3,0,t.indicator.tags),n(e,5,0,n(e,6,0,"progress",t.indicator.class))},function(n,e){var t=e.component;n(e,4,0,t.indicator.value,t.indicator.max)})}var h=function(){function n(){this.brakeDisabled=!1,this.throttleDisabled=!1,this.brake=new l.n,this.throttle=new l.n}return n.prototype.ngOnInit=function(){},n}(),v=l.qb({encapsulation:2,styles:[],data:{}});function f(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,6,"section",[["class","field is-grouped"]],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(2,0,null,null,1,"button",[["class","button is-danger is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.brake.next()&&l),l},null,null)),(n()(),l.Ib(-1,null,["Brake"])),(n()(),l.sb(4,0,null,null,2,"span",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(5,0,null,null,1,"button",[["class","button is-primary is-outlined is-large"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.throttle.next()&&l),l},null,null)),(n()(),l.Ib(-1,null,["Throttle"]))],null,function(n,e){var t=e.component;n(e,2,0,t.brakeDisabled),n(e,5,0,t.throttleDisabled)})}var g=t("gIcY"),y=t("Y9ZX"),m=function(){function n(n,e){this.fb=n,this.formTools=e,this.recharge=new l.n,this.totalBattery=100,this.minimumBattery=10}return n.prototype.ngOnInit=function(){this.form=this.fb.group({rechargedDistance:[0,[g.l.required,g.l.min(this.minimumBattery),g.l.max(this.totalBattery)]]})},n.prototype.getErrors=function(n){return this.formTools.getErrors(this.form,n)},n.prototype.mustShowError=function(n){return this.formTools.mustShowError(this.form,n)},n.prototype.hasError=function(n,e){return this.formTools.hasError(this.form,n,e)},n}(),T=l.qb({encapsulation:2,styles:[],data:{}});function C(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"p",[["class","help is-danger"]],null,null,null,null,null)),(n()(),l.Ib(1,null,["Fill more than ",""]))],null,function(n,e){n(e,1,0,e.component.getErrors("rechargedDistance").min.min)})}function D(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"p",[["class","help is-danger"]],null,null,null,null,null)),(n()(),l.Ib(1,null,["Fill less than ",""]))],null,function(n,e){n(e,1,0,e.component.getErrors("rechargedDistance").max.max)})}function O(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,21,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"submit"],[null,"reset"]],function(n,e,t){var r=!0,a=n.component;return"submit"===e&&(r=!1!==l.Cb(n,2).onSubmit(t)&&r),"reset"===e&&(r=!1!==l.Cb(n,2).onReset()&&r),"keyup.enter"===e&&(r=!1!==a.recharge.next(a.form.value.rechargedDistance)&&r),r},null,null)),l.rb(1,16384,null,0,g.o,[],null,null),l.rb(2,540672,null,0,g.f,[[8,null],[8,null]],{form:[0,"form"]},null),l.Gb(2048,null,g.b,null,[g.f]),l.rb(4,16384,null,0,g.j,[[4,g.b]],null,null),(n()(),l.sb(5,0,null,null,16,"div",[],null,null,null,null,null)),(n()(),l.sb(6,0,null,null,15,"div",[["class","field has-addons"]],null,null,null,null,null)),(n()(),l.sb(7,0,null,null,11,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(8,0,null,null,6,"input",[["class","input"],["formControlName","rechargedDistance"],["name","rechargedDistance"],["placeholder","Kilometers"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(n,e,t){var r=!0;return"input"===e&&(r=!1!==l.Cb(n,9)._handleInput(t.target.value)&&r),"blur"===e&&(r=!1!==l.Cb(n,9).onTouched()&&r),"compositionstart"===e&&(r=!1!==l.Cb(n,9)._compositionStart()&&r),"compositionend"===e&&(r=!1!==l.Cb(n,9)._compositionEnd(t.target.value)&&r),"change"===e&&(r=!1!==l.Cb(n,10).onChange(t.target.value)&&r),"input"===e&&(r=!1!==l.Cb(n,10).onChange(t.target.value)&&r),"blur"===e&&(r=!1!==l.Cb(n,10).onTouched()&&r),r},null,null)),l.rb(9,16384,null,0,g.c,[l.F,l.l,[2,g.a]],null,null),l.rb(10,16384,null,0,g.n,[l.F,l.l],null,null),l.Gb(1024,null,g.g,function(n,e){return[n,e]},[g.c,g.n]),l.rb(12,671744,null,0,g.e,[[3,g.b],[8,null],[8,null],[6,g.g],[2,g.q]],{name:[0,"name"]},null),l.Gb(2048,null,g.h,null,[g.e]),l.rb(14,16384,null,0,g.i,[[4,g.h]],null,null),(n()(),l.jb(16777216,null,null,1,null,C)),l.rb(16,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.jb(16777216,null,null,1,null,D)),l.rb(18,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.sb(19,0,null,null,2,"div",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(20,0,null,null,1,"button",[["class","button is-primary"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0,r=n.component;return"click"===e&&(l=!1!==r.recharge.next(r.form.value.rechargedDistance)&&l),l},null,null)),(n()(),l.Ib(-1,null,["Recharge"]))],function(n,e){var t=e.component;n(e,2,0,t.form),n(e,12,0,"rechargedDistance"),n(e,16,0,t.hasError("rechargedDistance","min")),n(e,18,0,t.hasError("rechargedDistance","max"))},function(n,e){var t=e.component;n(e,0,0,l.Cb(e,4).ngClassUntouched,l.Cb(e,4).ngClassTouched,l.Cb(e,4).ngClassPristine,l.Cb(e,4).ngClassDirty,l.Cb(e,4).ngClassValid,l.Cb(e,4).ngClassInvalid,l.Cb(e,4).ngClassPending),n(e,8,0,l.Cb(e,14).ngClassUntouched,l.Cb(e,14).ngClassTouched,l.Cb(e,14).ngClassPristine,l.Cb(e,14).ngClassDirty,l.Cb(e,14).ngClassValid,l.Cb(e,14).ngClassInvalid,l.Cb(e,14).ngClassPending),n(e,20,0,t.form.invalid)})}var I=t("9W44"),B=t("SHZb"),k=function(){function n(){this.brake=new l.n,this.throttle=new l.n,this.recharge=new l.n}return n.prototype.ngOnInit=function(){},n}(),w=l.qb({encapsulation:2,styles:[],data:{}});function j(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"app-indicator",[],null,null,null,b,d)),l.rb(1,114688,null,0,c,[],{indicator:[0,"indicator"]},null)],function(n,e){n(e,1,0,e.context.$implicit)},null)}function E(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"app-speed-controls",[],null,[[null,"brake"],[null,"throttle"]],function(n,e,t){var l=!0,r=n.component;return"brake"===e&&(l=!1!==r.brake.next()&&l),"throttle"===e&&(l=!1!==r.throttle.next()&&l),l},f,v)),l.rb(1,114688,null,0,h,[],{brakeDisabled:[0,"brakeDisabled"],throttleDisabled:[1,"throttleDisabled"]},{brake:"brake",throttle:"throttle"})],function(n,e){var t=e.component;n(e,1,0,t.isBrakeDisabled,t.isThrottleDisabled)},null)}function S(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"app-battery-recharger",[],null,[[null,"recharge"]],function(n,e,t){var l=!0;return"recharge"===e&&(l=!1!==n.component.recharge.next(t)&&l),l},O,T)),l.rb(1,114688,null,0,m,[g.d,y.a],{totalBattery:[0,"totalBattery"]},{recharge:"recharge"})],function(n,e){n(e,1,0,e.component.car.totalBattery)},null)}function K(n){return l.Kb(0,[l.Eb(0,u.r,[]),l.Eb(0,u.d,[l.w]),(n()(),l.sb(2,0,null,null,11,"app-card",[],null,null,null,I.b,I.a)),l.rb(3,114688,null,0,B.a,[],{caption:[0,"caption"],value:[1,"value"]},null),l.Fb(4,1),l.Fb(5,2),(n()(),l.sb(6,0,null,0,2,"main",[],null,null,null,null,null)),(n()(),l.jb(16777216,null,null,1,null,j)),l.rb(8,278528,null,0,u.l,[l.R,l.O,l.u],{ngForOf:[0,"ngForOf"]},null),(n()(),l.sb(9,0,null,1,4,"footer",[],null,null,null,null,null)),(n()(),l.jb(16777216,null,null,1,null,E)),l.rb(11,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null),(n()(),l.jb(16777216,null,null,1,null,S)),l.rb(13,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,3,0,l.Jb(e,3,0,n(e,4,0,l.Cb(e,0),t.car.name)),l.Jb(e,3,1,n(e,5,0,l.Cb(e,1),t.car.cost,"EUR"))),n(e,8,0,t.indicators),n(e,11,0,t.hasBattery),n(e,13,0,!t.hasBattery)},null)}var U=function(){function n(){this.save=new l.n,this.delete=new l.n}return n.prototype.ngOnInit=function(){},n}(),L=l.qb({encapsulation:2,styles:[],data:{}});function $(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,7,"section",[],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,6,"div",[["class","field is-grouped"]],null,null,null,null,null)),(n()(),l.sb(2,0,null,null,2,"p",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(3,0,null,null,1,"a",[["class","button is-success"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.save.next()&&l),l},null,null)),(n()(),l.Ib(-1,null,[" Save travel "])),(n()(),l.sb(5,0,null,null,2,"p",[["class","control"]],null,null,null,null,null)),(n()(),l.sb(6,0,null,null,1,"a",[["class","button is-danger"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.delete.next()&&l),l},null,null)),(n()(),l.Ib(-1,null,[" Delete travel "]))],null,null)}var x=t("6blF"),A=t("T1DM"),R=t("/21U");function F(n){var e=n.subscriber,t=n.counter,l=n.period;e.next(t),this.schedule({subscriber:e,counter:t+1,period:l},l)}var G,q=t("67Y/"),J=t("xMyE"),_=t("VnD/"),M=t("t9fZ"),z=t("AytR"),P=t("Ocbj"),V=[{value:0,max:0,class:"is-info",tags:[{caption:"Speed",value:0,class:"is-info"},{caption:"Top",value:0,class:"is-danger"}]},{value:0,max:0,class:"is-success",tags:[{caption:"Traveled",value:0,class:"is-success"},{caption:"Remaining",value:0,class:"is-danger"}]}],Y=function(){function n(){this.indicators=V,this.speedIndicator=this.indicators[0],this.batteryIndicator=this.indicators[1]}return n.prototype.initilizeIndicators=function(n){return this.speedIndicator.max=n.topSpeed,this.speedIndicator.tags[1].value=n.topSpeed,this.batteryIndicator.max=n.totalBattery,this.updateIndicators(n),this.indicators},n.prototype.updateIndicators=function(n){return this.speedIndicator.value=n.currentSpeed,this.speedIndicator.class=this.getSpeedClass(n),this.speedIndicator.tags[0].value=n.currentSpeed,this.batteryIndicator.value=n.remainingBattery,this.batteryIndicator.class=this.getBatteryClass(n),this.batteryIndicator.tags[0].value=n.distanceTraveled,this.batteryIndicator.tags[1].value=n.remainingBattery,this.indicators},n.prototype.getBatteryClass=function(n){return n.remainingBattery<=z.a.dangerKmsBattery?"is-danger":n.remainingBattery<=z.a.warningKmsBattery?"is-warning":"is-success"},n.prototype.getSpeedClass=function(n){var e=n.currentSpeed/n.topSpeed;return e>=z.a.dangerSpeedRate?"is-danger":e>=z.a.warningSpeedRate?"is-warning":"is-info"},n}(),Z=function(){function n(){var n=this;this.oneHourSecs=3600,this.hasBattery=function(n){return n.remainingBattery>0},this.isBrakeDisabled=function(n){return n.currentSpeed<=0},this.isThrottleDisabled=function(n){return n.currentSpeed>=n.topSpeed},this.deltaSpeed=function(e){return n.rawDeltaSpeed(e)/z.a.factorSpeed},this.rawDeltaSpeed=function(n){return n.topSpeed-n.currentSpeed+1},this.travelDistance=function(e){var t=e.currentSpeed*z.a.timeTravel/n.oneHourSecs;e.distanceTraveled+=t,e.remainingBattery-=t},this.getValidatedRecharging=function(n,e){var t=n;return!n||n<0?t=0:n>e.totalBattery&&(t=e.totalBattery),t}}return n.prototype.brake=function(n){n.currentSpeed-=this.deltaSpeed(n),n.currentSpeed<=1&&(n.currentSpeed=0)},n.prototype.throttle=function(n){n.currentSpeed+=this.deltaSpeed(n),n.currentSpeed>n.topSpeed&&(n.currentSpeed=n.topSpeed)},n.prototype.recharge=function(n,e){e.remainingBattery=this.getValidatedRecharging(n,e)},n.prototype.checkBattery=function(n){n.remainingBattery<=n.currentSpeed?this.stopCar(n):this.travelDistance(n)},n.prototype.updateCarTravelData=function(n,e){return n.currentSpeed=e.currentSpeed,n.remainingBattery=e.remainingBattery,n.distanceTraveled=e.distanceTraveled,n.owner=e.owner,n},n.prototype.stopCar=function(n){n.currentSpeed=0,n.distanceTraveled+=n.remainingBattery,n.remainingBattery=0},n}();!function(n){n.LoadCar="[Car] Load Car",n.LoadCarOK="[Car] Load Car OK",n.LoadCarError="[Car] Load Car Error",n.LoadTravel="[Car] Load Travel",n.LoadTravelOK="[Car] Load Travel OK",n.LoadTravelError="[Car] Load Travel Error",n.InsertTravel="[Car] Insert Travel",n.InsertTravelOK="[Car] Insert Travel OK",n.InsertTravelError="[Car] Insert Travel Error",n.UpdateTravel="[Car] Update Travel",n.UpdateTravelOK="[Car] Update Travel OK",n.UpdateTravelError="[Car] Update Travel Error",n.DeleteTravel="[Car] Delete Travel",n.DeleteTravelOK="[Car] Delete Travel OK",n.DeleteTravelError="[Car] Delete Travel Error",n.Brake="[Car] Brake",n.Throttle="[Car] Throttle",n.Recharge="[Car] Recharge",n.UpdateIndicators="[Car] Update Indicators"}(G||(G={}));var N=function(){return function(n){this.payload=n,this.type=G.LoadCar}}(),H=function(){return function(n){this.payload=n,this.type=G.LoadCarOK}}(),W=function(){return function(n){this.payload=n,this.type=G.LoadCarError}}(),X=function(){return function(n){this.payload=n,this.type=G.LoadTravel}}(),Q=function(){return function(n){this.payload=n,this.type=G.LoadTravelOK}}(),nn=function(){return function(n){this.payload=n,this.type=G.LoadTravelError}}(),en=function(){return function(n){this.payload=n,this.type=G.InsertTravel}}(),tn=function(){return function(n){this.payload=n,this.type=G.InsertTravelOK}}(),ln=function(){return function(n){this.payload=n,this.type=G.InsertTravelError}}(),rn=function(){return function(n){this.payload=n,this.type=G.UpdateTravel}}(),an=function(){return function(n){this.payload=n,this.type=G.UpdateTravelOK}}(),un=function(){return function(n){this.payload=n,this.type=G.UpdateTravelError}}(),on=function(){return function(n){this.payload=n,this.type=G.DeleteTravel}}(),sn=function(){return function(){this.type=G.DeleteTravelOK}}(),cn=function(){return function(n){this.payload=n,this.type=G.DeleteTravelError}}(),dn=function(){return function(n){this.payload=n,this.type=G.Brake}}(),pn=function(){return function(n){this.payload=n,this.type=G.Throttle}}(),bn=function(){return function(n){this.payload=n,this.type=G.Recharge}}(),hn=function(){return function(n){this.payload=n,this.type=G.UpdateIndicators}}(),vn=t("yGQT"),fn={car:null,travel:null,indicators:[],working:!1,completed:!1,message:"",canBeDeactivated:!0},gn=Object(vn.B)("car"),yn=(Object(vn.D)(gn,function(n){return n}),Object(vn.D)(gn,function(n){return n.car})),mn=Object(vn.D)(gn,function(n){return n.travel}),Tn=Object(vn.D)(gn,function(n){return n.canBeDeactivated}),Cn=Object(vn.D)(gn,function(n){return n.indicators}),Dn=function(){function n(n,e,t,l,r){var a=this;this.route=n,this.display=e,this.engine=t,this.globalStore=l,this.store=r,this._canBeDeactivated=!0,this.onBrake=function(){a.engine.brake(a.car),a.store.dispatch(new dn(a.car))},this.onThrottle=function(){a.engine.throttle(a.car),a.store.dispatch(new pn(a.car))},this.onRecharge=function(n){a.engine.recharge(n,a.car),a.store.dispatch(new bn(a.car))},this.onSaveTravel=function(){return a.store.dispatch(new rn(a.car))},this.onDeleteTravel=function(){return a.store.dispatch(new on(a.car))},this.hasBattery=function(){return a.engine.hasBattery(a.car)},this.isBrakeDisabled=function(){return a.engine.isBrakeDisabled(a.car)},this.isThrottleDisabled=function(){return a.engine.isThrottleDisabled(a.car)},this.onCarGotten=function(n){if(null!=n){if(null==a.car){var e=a.display.initilizeIndicators(n);a.store.dispatch(new hn(e)),a.store.dispatch(new X(n))}a.car=n,a.updateIndicators()}},this.onCarTravelGotten=function(n){a.engine.updateCarTravelData(a.car,n),a.globalStore.dispatchUserMessage("Ride like the wind!!"),a.updateIndicators()},this.timeGoesBy=function(n){null!=a.car&&a.updateIndicators()}}return n.prototype.ngOnInit=function(){this.loadCar(),this.subscribeToChanges()},n.prototype.canBeDeactivated=function(){return this.globalStore.dispatchUserMessage(this._canBeDeactivated?"You can go your own away ;-)":"Save or delete before exit !!"),this._canBeDeactivated},n.prototype.ngOnDestroy=function(){null!=this.intervalSubscription&&this.intervalSubscription.unsubscribe()},n.prototype.loadCar=function(){var n=this;this.globalStore.dispatchUserMessage("Loading data !!"),this.route.params.pipe(Object(q.a)(function(n){return n.carId})).subscribe(function(e){return n.store.dispatch(new N(e))})},n.prototype.subscribeToChanges=function(){var n,e,t=this;this.car$=this.store.select(yn).pipe(Object(J.a)(this.onCarGotten)),this.indicators$=this.store.select(Cn),this.travel$=this.store.select(mn).pipe(Object(_.a)(function(n){return null!=n}),Object(M.a)(1),Object(J.a)(this.onCarTravelGotten)),this.store.select(Tn).subscribe(function(n){return t._canBeDeactivated=n}),this.intervalSubscription=(n=z.a.refreshInterval,void 0===n&&(n=0),void 0===e&&(e=A.a),(!Object(R.a)(n)||n<0)&&(n=0),e&&"function"==typeof e.schedule||(e=A.a),new x.a(function(t){return t.add(e.schedule(F,n,{subscriber:t,counter:0,period:n})),t})).subscribe(this.timeGoesBy)},n.prototype.updateIndicators=function(){this.engine.checkBattery(this.car);var n=this.display.updateIndicators(this.car);this.store.dispatch(new hn(n))},n}(),On=t("ZYCi"),In=l.qb({encapsulation:2,styles:[],data:{}});function Bn(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,6,"article",[],null,null,null,null,null)),(n()(),l.sb(1,0,null,null,2,"app-driver-cockpit",[],null,[[null,"brake"],[null,"throttle"],[null,"recharge"]],function(n,e,t){var l=!0,r=n.component;return"brake"===e&&(l=!1!==r.onBrake()&&l),"throttle"===e&&(l=!1!==r.onThrottle()&&l),"recharge"===e&&(l=!1!==r.onRecharge(t)&&l),l},K,w)),l.rb(2,114688,null,0,k,[],{car:[0,"car"],indicators:[1,"indicators"],hasBattery:[2,"hasBattery"],isBrakeDisabled:[3,"isBrakeDisabled"],isThrottleDisabled:[4,"isThrottleDisabled"]},{brake:"brake",throttle:"throttle",recharge:"recharge"}),l.Eb(131072,u.b,[l.i]),(n()(),l.sb(4,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),l.sb(5,0,null,null,1,"app-travel-manager",[],null,[[null,"save"],[null,"delete"]],function(n,e,t){var l=!0,r=n.component;return"save"===e&&(l=!1!==r.onSaveTravel()&&l),"delete"===e&&(l=!1!==r.onDeleteTravel()&&l),l},$,L)),l.rb(6,114688,null,0,U,[],null,{save:"save",delete:"delete"})],function(n,e){var t=e.component;n(e,2,0,t.car,l.Jb(e,2,1,l.Cb(e,3).transform(t.indicators$)),t.hasBattery(),t.isBrakeDisabled(),t.isThrottleDisabled()),n(e,6,0)},null)}function kn(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),l.Ib(-1,null,[" Loading car and travel data... "]))],null,null)}function wn(n){return l.Kb(2,[(n()(),l.jb(16777216,null,null,3,null,Bn)),l.rb(1,16384,null,0,u.m,[l.R,l.O],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),l.Eb(131072,u.b,[l.i]),l.Eb(131072,u.b,[l.i]),(n()(),l.jb(0,[["loading",2]],null,0,null,kn))],function(n,e){var t=e.component;n(e,1,0,null!=l.Jb(e,1,0,l.Cb(e,2).transform(t.car$))&&null!=l.Jb(e,1,0,l.Cb(e,3).transform(t.travel$)),l.Cb(e,4))},null)}var jn=l.ob("app-car",Dn,function(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"app-car",[],null,null,null,wn,In)),l.rb(1,245760,null,0,Dn,[On.a,Y,Z,P.a,vn.n],null,null)],function(n,e){n(e,1,0)},null)},{},{},[]),En=function(){function n(){}return n.prototype.canDeactivate=function(n,e,t,l){return!!l.url.includes("auth")||n.canBeDeactivated()},n}(),Sn=function(){},Kn=t("PCNd"),Un=function(){return(Un=Object.assign||function(n){for(var e,t=1,l=arguments.length;t<l;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)};function Ln(n,e){switch(void 0===n&&(n=fn),e.type){case G.LoadCar:return{car:null,travel:null,indicators:[],working:!0,completed:!1,message:"Loading car...",canBeDeactivated:!0};case G.LoadCarOK:return{car:e.payload,travel:null,indicators:[],working:!1,completed:!0,message:"Car Loaded",canBeDeactivated:!0};case G.LoadCarError:return{car:null,travel:null,indicators:[],working:!1,completed:!1,message:e.payload,canBeDeactivated:!0};case G.LoadTravel:return Un({},n,{travel:null,working:!0,completed:!1,message:"Loading Travel...",canBeDeactivated:!0});case G.LoadTravelOK:return Un({},n,{travel:e.payload,working:!1,completed:!0,message:"Travel Loaded",canBeDeactivated:!0});case G.LoadTravelError:return Un({},n,{travel:null,working:!1,completed:!1,message:e.payload,canBeDeactivated:!0});case G.InsertTravel:return Un({},n,{travel:null,working:!0,completed:!1,message:"Inserting Travel...",canBeDeactivated:!0});case G.InsertTravelOK:return Un({},n,{travel:e.payload,working:!1,completed:!0,message:"Travel Inserted",canBeDeactivated:!0});case G.InsertTravelError:return Un({},n,{travel:null,working:!1,completed:!1,message:e.payload,canBeDeactivated:!0});case G.UpdateTravel:return Un({},n,{travel:null,working:!0,completed:!1,message:"Updating Travel...",canBeDeactivated:!1});case G.UpdateTravelOK:return Un({},n,{travel:e.payload,working:!1,completed:!0,message:"Travel Updated",canBeDeactivated:!0});case G.UpdateTravelError:return Un({},n,{travel:null,working:!1,completed:!1,message:e.payload,canBeDeactivated:!0});case G.DeleteTravel:return Un({},n,{travel:null,working:!0,completed:!1,message:"Deleting Travel...",canBeDeactivated:!1});case G.DeleteTravelOK:return Un({},n,{travel:null,working:!1,completed:!0,message:"Travel Deleted",canBeDeactivated:!0});case G.DeleteTravelError:return Un({},n,{working:!1,completed:!1,message:e.payload,canBeDeactivated:!0});case G.Brake:return Un({},n,{car:Un({},e.payload),message:"Brake",canBeDeactivated:!1});case G.Throttle:return Un({},n,{car:Un({},e.payload),message:"Throttle",canBeDeactivated:!1});case G.Throttle:return Un({},n,{car:Un({},e.payload),message:"Recharge",canBeDeactivated:!1});case G.UpdateIndicators:return Un({},n,{indicators:e.payload.slice(),message:"Updating Indicators"});default:return n}}var $n=t("mrSG"),xn=t("jYNz"),An=t("F/XL"),Rn=t("psW0"),Fn=t("9Z1F"),Gn=function(){function n(n,e,t){var l=this;this.actions$=n,this.cars=e,this.travels=t,this.loadCarEffect$=this.actions$.pipe(Object(xn.d)(G.LoadCar),Object(Rn.a)(function(n){return l.cars.getCarByLinkId$(n.payload).pipe(Object(q.a)(function(n){return new H(n)}),Object(Fn.a)(function(n){return Object(An.a)(new W("Error loading car"))}))})),this.loadTravelEffect$=this.actions$.pipe(Object(xn.d)(G.LoadTravel),Object(Rn.a)(function(n){return l.travels.getCarTravelByCar$(n.payload).pipe(Object(q.a)(function(n){return new Q(n)}),Object(Fn.a)(function(e){return l.onLoadTravelError$(e,n)}))})),this.InsertTravelEffect$=this.actions$.pipe(Object(xn.d)(G.InsertTravel),Object(Rn.a)(function(n){return l.travels.postCarTravel$(n.payload).pipe(Object(q.a)(function(n){return new tn(n)}),Object(Fn.a)(function(n){return Object(An.a)(new ln("Error inserting travel"))}))})),this.UpdateTravelEffect$=this.actions$.pipe(Object(xn.d)(G.UpdateTravel),Object(Rn.a)(function(n){return l.travels.putCarTravel$(n.payload).pipe(Object(q.a)(function(n){return new an(n)}),Object(Fn.a)(function(n){return Object(An.a)(new un("Error updating travel"))}))})),this.DeleteTravelEffect$=this.actions$.pipe(Object(xn.d)(G.DeleteTravel),Object(Rn.a)(function(n){return l.travels.deleteCarTravel$(n.payload).pipe(Object(q.a)(function(){return new sn}),Object(Fn.a)(function(n){return Object(An.a)(new cn("Error deleting travel"))}))}))}return n.prototype.onLoadTravelError$=function(n,e){return 404===n.status?Object(An.a)(new en(e.payload)):Object(An.a)(new nn("Unexpected Error loading travel."))},Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"loadCarEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"loadTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"InsertTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"UpdateTravelEffect$",void 0),Object($n.b)([Object(xn.b)(),Object($n.d)("design:type",x.a)],n.prototype,"DeleteTravelEffect$",void 0),n}(),qn=t("nsGb"),Jn=t("t/Na"),_n=function(){function n(n){var e=this;this.http=n,this.travelsUrl=z.a.apiUrl+"priv/travels",this.getCarTravelByCar$=function(n){return e.http.get(e.getUrlTravel(n))},this.postCarTravel$=function(n){return e.http.post(e.travelsUrl,e.getTravel(n))},this.putCarTravel$=function(n){return e.http.put(e.getUrlTravel(n),e.getTravel(n))},this.deleteCarTravel$=function(n){return e.http.delete(e.getUrlTravel(n))},this.getUrlTravel=function(n){return e.travelsUrl+"/"+e.getTravelId(n)},this.getTravel=function(n){return{_id:e.getTravelId(n),currentSpeed:n.currentSpeed,remainingBattery:n.remainingBattery,distanceTraveled:n.distanceTraveled,owner:n.owner}},this.getTravelId=function(n){return""+n.link.routerLink}}return n.ngInjectableDef=l.V({factory:function(){return new n(l.Z(Jn.c))},token:n,providedIn:"root"}),n}();t.d(e,"CarModuleNgFactory",function(){return Mn});var Mn=l.pb(r,[],function(n){return l.zb([l.Ab(512,l.k,l.eb,[[8,[a.a,jn]],[3,l.k],l.z]),l.Ab(4608,u.o,u.n,[l.w,[2,u.x]]),l.Ab(4608,g.d,g.d,[]),l.Ab(4608,g.p,g.p,[]),l.Ab(4608,y.a,y.a,[]),l.Ab(4608,Y,Y,[]),l.Ab(4608,Z,Z,[]),l.Ab(4608,En,En,[]),l.Ab(1073742336,u.c,u.c,[]),l.Ab(1073742336,On.p,On.p,[[2,On.w],[2,On.n]]),l.Ab(1073742336,Sn,Sn,[]),l.Ab(1073742336,g.m,g.m,[]),l.Ab(1073742336,g.k,g.k,[]),l.Ab(1073742336,Kn.a,Kn.a,[]),l.Ab(1024,vn.j,function(){return[{key:"car",reducerFactory:vn.z,metaReducers:[],initialState:void 0}]},[]),l.Ab(1024,vn.q,function(){return[Ln]},[]),l.Ab(1024,vn.r,function(n){return[n]},[vn.q]),l.Ab(1024,vn.b,function(n,e,t){return[vn.w(n,e,t)]},[l.s,vn.q,vn.r]),l.Ab(1073873408,vn.o,vn.o,[vn.j,vn.b,vn.g,vn.p]),l.Ab(512,Gn,Gn,[xn.a,qn.a,_n]),l.Ab(1024,xn.i,function(n){return[xn.e(n)]},[Gn]),l.Ab(1073742336,xn.g,xn.g,[xn.f,xn.i,[2,vn.p],[2,vn.o]]),l.Ab(1073742336,r,r,[]),l.Ab(1024,On.l,function(){return[[{path:":carId",component:Dn,canDeactivate:[En]}]]},[])])})}}]);